extends default

block content
  div.course
    h1 Courses Available:
    each course in courses
      br
      h2.course-name #{course.name}
      a(href=`/courses?id=${course.id}`) View Course
      br
      button(type='button', id=course.name, onClick='addCourse(this.id)') Add Course
      button(type='button', id=course.name, onClick='dropCourse(this.id)') Drop Course
      br
      button(type='button', id=course.name, onClick='swapCourse()') Swap this
      br
  div.course
    h1 My Courses
    <p id="myCourses">No enrolled courses</p>


  script.
    var classes = []

    function addCourse(clicked_id) {
      var index = classes.indexOf(clicked_id)
      if (index < 0) {
        classes.push(clicked_id)
      }
      var courses = ""
      for (i = 0; i < classes.length; i++) {
        courses = courses + "<br>" + classes[i]
      }
      document.getElementById("myCourses").innerHTML = courses
    }

    function dropCourse(clicked_id) {
      var index = classes.indexOf(clicked_id)
      if (index > -1) {
        classes.splice(index, 1)
      }
      var courses = ""
      for (i = 0; i < classes.length; i++) {
        courses = courses + "<br>" + classes[i]
      }
      document.getElementById("myCourses").innerHTML = courses
    }

    function swapCourse(clicked_id) {
    // if clicked is in courses, then next click is on a course they aren't in
    // if clicked is not in courses, then next click on a course they are in

      var index = classes.indexOf(clicked_id)
      if (index > -1) {
        var toSwap = scanf()
        dropCourse(toSwap)
      } else {
        var toSwap = prompt("What class do you want to switch with? (You don't have the selected class)")
        if (classes.indexOf(toSwap) > -1) {
          classes.splice(index, 1)
          classes.push(clicked_id)
          document.getElementById("myCourses").innerHTML = courses
        } else {
          document.getElementById("myCourses").innerHTML = courses + "You don't have that class."
        }
      }
    }
